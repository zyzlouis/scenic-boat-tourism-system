<!--pages/search/search.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <van-search
      value="{{searchValue}}"
      placeholder="è¯·è¾“å…¥èˆ¹å·ï¼Œå¦‚ï¼šE-001"
      show-action
      bind:change="onSearchChange"
      bind:search="onSearch"
      bind:clear="onClear"
    >
      <view slot="action" bindtap="onSearch">æœç´¢</view>
    </van-search>
  </view>

  <!-- ä½¿ç”¨è¯´æ˜ -->
  <view wx:if="{{!searchResult && !searching}}" class="tips-section">
    <view class="tips-card card">
      <view class="tips-icon">ğŸ’¡</view>
      <view class="tips-title">ä½¿ç”¨è¯´æ˜</view>
      <view class="tips-content">
        <view class="tip-item">â€¢ å½“æ¸¸å®¢æ‰‹æœºæ²¡ç”µæ— æ³•å‡ºç¤ºæ ¸é”€ç æ—¶ä½¿ç”¨</view>
        <view class="tip-item">â€¢ è¯¢é—®æ¸¸å®¢æ‰€ä¹˜åçš„èˆ¹å·</view>
        <view class="tip-item">â€¢ è¾“å…¥èˆ¹å·æŸ¥è¯¢è®¢å•ä¿¡æ¯</view>
        <view class="tip-item">â€¢ ç¡®è®¤åå³å¯å®Œæˆæ”¶èˆ¹æ“ä½œ</view>
      </view>
    </view>

    <view class="example-section">
      <view class="example-title">èˆ¹å·æ ¼å¼ç¤ºä¾‹</view>
      <view class="example-list">
        <view class="example-item">æœ‰åŠ¨åŠ›èˆ¹ï¼šE-001 ~ E-010</view>
        <view class="example-item">æ— åŠ¨åŠ›èˆ¹ï¼šP-001 ~ P-015</view>
      </view>
    </view>
  </view>

  <!-- æœç´¢ä¸­ -->
  <view wx:if="{{searching}}" class="loading-container">
    <van-loading size="48rpx" type="spinner" color="#07c160">æŸ¥è¯¢ä¸­...</van-loading>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <view wx:if="{{searchResult}}" class="result-section">
    <!-- è®¢å•ä¿¡æ¯å¡ç‰‡ -->
    <view class="result-card card">
      <view class="card-header">
        <view class="card-title">è®¢å•ä¿¡æ¯</view>
        <view class="status-tag tag-success">è®¡æ—¶ä¸­</view>
      </view>

      <view class="info-list">
        <view class="info-item">
          <text class="label">èˆ¹å·ï¼š</text>
          <text class="value boat-number">{{searchResult.boatNumber}}</text>
        </view>
        <view class="info-item">
          <text class="label">èˆ¹å‹ï¼š</text>
          <text class="value">{{searchResult.boatTypeName}}</text>
        </view>
        <view class="info-item">
          <text class="label">æ¸¸å®¢ï¼š</text>
          <text class="value">{{searchResult.userNickname}}</text>
        </view>
        <view class="info-item">
          <text class="label">è®¢å•å·ï¼š</text>
          <text class="value small">{{searchResult.orderNo}}</text>
        </view>
      </view>

      <view class="divider"></view>

      <view class="timing-info">
        <view class="timing-item">
          <view class="timing-label">å¼€å§‹æ—¶é—´</view>
          <view class="timing-value">{{formatTime(searchResult.startTime)}}</view>
        </view>
        <view class="timing-item highlight">
          <view class="timing-label">å·²ç”¨æ—¶é•¿</view>
          <view class="timing-value">{{formatDuration(searchResult.usedMinutes)}}</view>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-section">
      <van-button
        type="primary"
        size="large"
        round
        custom-class="btn-primary"
        bindtap="handleEndTrip"
      >
        ç¡®è®¤æ”¶èˆ¹
      </van-button>
    </view>
  </view>
</view>
