<!--pages/index/index.wxml-->
<view class="container">
  <!-- è½®æ’­å›¾ -->
  <view wx:if="{{banners.length > 0}}" class="swiper-section">
    <swiper
      class="swiper-container"
      autoplay="{{true}}"
      interval="{{3000}}"
      duration="{{500}}"
      circular="{{true}}"
      indicator-dots="{{true}}"
      indicator-color="rgba(255, 255, 255, 0.5)"
      indicator-active-color="#ffffff"
    >
      <swiper-item wx:for="{{banners}}" wx:key="_id">
        <image
          class="swiper-image"
          src="{{item.imageUrl}}"
          mode="aspectFill"
          bindtap="onBannerClick"
          data-item="{{item}}"
        />
      </swiper-item>
    </swiper>
  </view>

  <!-- å…¬å‘Šæ  -->
  <view wx:if="{{announcements.length > 0}}" class="notice-section">
    <view
      class="notice-bar notice-{{announcements[0].type}}"
      bindtap="onAnnouncementClick"
      data-item="{{announcements[0]}}"
    >
      <view class="notice-icon">
        <text wx:if="{{announcements[0].type === 'warning'}}">âš ï¸</text>
        <text wx:elif="{{announcements[0].type === 'urgent'}}">ğŸš¨</text>
        <text wx:else>â„¹ï¸</text>
      </view>
      <view class="notice-content">
        <text class="notice-text">{{announcements[0].title}}</text>
      </view>
      <view class="notice-arrow">
        <van-icon name="arrow" size="16rpx" />
      </view>
    </view>
  </view>

  <!-- é¡¶éƒ¨æ¬¢è¿åŒºåŸŸ -->
  <view class="header">
    <view class="title">æ™¯åŒºæ¸¸èˆ¹ç§Ÿèµ</view>
    <view class="subtitle">é€‰æ‹©æ‚¨å¿ƒä»ªçš„èˆ¹å‹ï¼Œå¼€å¯ç¾å¥½æ¸¸æ¹–ä¹‹æ—…</view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading-container">
    <van-loading size="48rpx" type="spinner" color="#1989fa">åŠ è½½ä¸­...</van-loading>
  </view>

  <!-- èˆ¹å‹åˆ—è¡¨ -->
  <view wx:else class="boat-list">
    <view
      wx:for="{{boatTypes}}"
      wx:key="id"
      class="boat-card"
      data-id="{{item.id}}"
      data-type-name="{{item.name}}"
      bindtap="selectBoatType"
    >
      <!-- èˆ¹å‹å›¾ç‰‡ -->
      <view class="boat-image">
        <image
          src="{{item.imageUrl || '/images/boat-placeholder.png'}}"
          mode="aspectFill"
        />
      </view>

      <!-- èˆ¹å‹ä¿¡æ¯ -->
      <view class="boat-info">
        <view class="boat-name">{{item.name}}</view>
        <view class="boat-desc">{{item.description}}</view>
        <view class="boat-capacity">
          <text class="icon">ğŸ‘¥</text>
          <text>æœ€å¤š{{item.maxCapacity}}äºº</text>
        </view>

        <!-- ä»·æ ¼ä¿¡æ¯ -->
        <view class="price-info">
          <view class="price-row">
            <text class="label">é—¨ç¥¨ä»·æ ¼ï¼š</text>
            <text class="price">Â¥{{item.pricing.basePrice}}</text>
          </view>
          <view class="price-row">
            <text class="label">æŠ¼é‡‘ï¼š</text>
            <text class="price">Â¥{{item.pricing.depositAmount}}</text>
          </view>
          <view class="price-row">
            <text class="label">åŒ…å«æ—¶é•¿ï¼š</text>
            <text>{{item.pricing.includedMinutes}}åˆ†é’Ÿ</text>
          </view>
          <view class="price-row">
            <text class="label">è¶…æ—¶è´¹ç‡ï¼š</text>
            <text>Â¥{{item.pricing.overtimeRate}}/åˆ†é’Ÿ</text>
          </view>
        </view>

        <!-- ç§ŸèµæŒ‰é’® -->
        <view class="boat-action">
          <van-button
            type="primary"
            size="large"
            round
            custom-class="rent-button"
          >
            ç«‹å³ç§Ÿèµ
          </van-button>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{!loading && boatTypes.length === 0}}" class="empty-container">
    <van-empty description="æš‚æ— å¯ç§Ÿèµçš„èˆ¹å‹" />
  </view>
</view>
