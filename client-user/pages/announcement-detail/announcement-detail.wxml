<!--pages/announcement-detail/announcement-detail.wxml-->
<wxs module="util">
  var formatTime = function(dateStr) {
    if (!dateStr) return '';
    var date = getDate(dateStr);
    var year = date.getFullYear();
    var month = ('0' + (date.getMonth() + 1)).slice(-2);
    var day = ('0' + date.getDate()).slice(-2);
    var hour = ('0' + date.getHours()).slice(-2);
    var minute = ('0' + date.getMinutes()).slice(-2);
    return year + '-' + month + '-' + day + ' ' + hour + ':' + minute;
  };

  var getTypeIcon = function(type) {
    if (type === 'warning') return 'âš ï¸';
    if (type === 'urgent') return 'ğŸš¨';
    return 'â„¹ï¸';
  };

  var getTypeText = function(type) {
    if (type === 'warning') return 'è­¦å‘Š';
    if (type === 'urgent') return 'ç´§æ€¥';
    return 'é€šçŸ¥';
  };

  module.exports = {
    formatTime: formatTime,
    getTypeIcon: getTypeIcon,
    getTypeText: getTypeText
  };
</wxs>

<view class="container">
  <!-- åŠ è½½ä¸­ -->
  <view wx:if="{{loading}}" class="loading-container">
    <van-loading size="48rpx" type="spinner" color="#1989fa">åŠ è½½ä¸­...</van-loading>
  </view>

  <!-- å…¬å‘Šè¯¦æƒ… -->
  <view wx:else class="announcement-detail">
    <!-- å…¬å‘Šå¤´éƒ¨ -->
    <view class="announcement-header">
      <view class="type-badge type-{{announcement.type}}">
        <text class="type-icon">{{util.getTypeIcon(announcement.type)}}</text>
        <text class="type-text">{{util.getTypeText(announcement.type)}}</text>
      </view>
      <view class="announcement-title">{{announcement.title}}</view>
      <view class="announcement-time">
        å‘å¸ƒæ—¶é—´ï¼š{{announcement.formattedTime}}
      </view>
    </view>

    <!-- å…¬å‘Šå†…å®¹ -->
    <view class="announcement-content">
      <text class="content-text">{{announcement.content}}</text>
    </view>
  </view>
</view>
