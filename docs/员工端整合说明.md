# å‘˜å·¥ç«¯æ•´åˆåˆ°ç”¨æˆ·ç«¯è¯´æ˜æ–‡æ¡£

**æ•´åˆæ—¶é—´**ï¼š2026-02-12
**ç›®çš„**ï¼šå°†å‘˜å·¥ç«¯åŠŸèƒ½æ•´åˆåˆ°ç”¨æˆ·ç«¯ï¼Œå®ç°å•ä¸€å°ç¨‹åºæäº¤å®¡æ ¸

---

## ğŸ“‹ æ•´åˆæ–¹æ¡ˆ

### èƒŒæ™¯
- åŸæœ‰ä¸¤ä¸ªç‹¬ç«‹å°ç¨‹åºï¼š`client-user`ï¼ˆç”¨æˆ·ç«¯ï¼‰å’Œ `client-staff`ï¼ˆå‘˜å·¥ç«¯ï¼‰
- å¾®ä¿¡å°ç¨‹åºå®¡æ ¸åªèƒ½æäº¤ä¸€ä¸ªå‰ç«¯
- éœ€è¦å°†å‘˜å·¥ç«¯æ•´åˆåˆ°ç”¨æˆ·ç«¯ä¸­

### è§£å†³æ–¹æ¡ˆ
å°†å‘˜å·¥ç«¯çš„æ‰€æœ‰é¡µé¢å¤åˆ¶åˆ°ç”¨æˆ·ç«¯çš„ `pages/staff/` ç›®å½•ä¸‹ï¼Œé€šè¿‡ä¸ªäººä¸­å¿ƒçš„"å‘˜å·¥å…¥å£"è¿›å…¥å‘˜å·¥åŠŸèƒ½ã€‚

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å¤åˆ¶å‘˜å·¥ç«¯é¡µé¢

å°† `client-staff/pages/` ä¸‹çš„4ä¸ªé¡µé¢å¤åˆ¶åˆ° `client-user/pages/staff/`ï¼š

| é¡µé¢ | åŸè·¯å¾„ | æ–°è·¯å¾„ | åŠŸèƒ½ |
|------|--------|--------|------|
| ç™»å½•é¡µ | `client-staff/pages/login` | `client-user/pages/staff/login` | å‘˜å·¥è´¦å·å¯†ç ç™»å½• |
| æ‰«ç é¡µ | `client-staff/pages/scan` | `client-user/pages/staff/scan` | æ‰«ç æ ¸é”€ï¼ˆå‘èˆ¹/æ”¶èˆ¹ï¼‰ |
| æœç´¢é¡µ | `client-staff/pages/search` | `client-user/pages/staff/search` | æŒ‰èˆ¹å·æŸ¥è¯¢è®¢å• |
| è®¢å•åˆ—è¡¨ | `client-staff/pages/orders` | `client-user/pages/staff/orders` | æŸ¥çœ‹å¾…å¤„ç†è®¢å• |

---

### 2. å¤åˆ¶å·¥å…·æ–‡ä»¶

å°† `client-staff/utils/` å¤åˆ¶åˆ° `client-user/pages/staff/utils/`ï¼š

| æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|
| api.js | API æ¥å£å°è£… |
| cloud.js | äº‘å‡½æ•°è°ƒç”¨å°è£… |
| filters.wxs | WXS è¿‡æ»¤å™¨ |
| util.js | å·¥å…·å‡½æ•° |

**è¯´æ˜**ï¼šç‹¬ç«‹ç›®å½•é¿å…ä¸ç”¨æˆ·ç«¯å·¥å…·æ–‡ä»¶å†²çª

---

### 3. ä¿®æ”¹å¼•ç”¨è·¯å¾„

æ‰¹é‡ä¿®æ”¹å‘˜å·¥é¡µé¢ä¸­çš„å·¥å…·æ–‡ä»¶å¼•ç”¨è·¯å¾„ï¼š
- åŸè·¯å¾„ï¼š`../../utils/xxx`
- æ–°è·¯å¾„ï¼š`../utils/xxx`

æ¶‰åŠæ–‡ä»¶ï¼š
- `pages/staff/scan/scan.js`
- `pages/staff/search/search.js`
- `pages/staff/orders/orders.js`
- `pages/staff/orders/orders.wxml`

---

### 4. æ³¨å†Œå‘˜å·¥é¡µé¢

ä¿®æ”¹ `client-user/app.json`ï¼Œæ³¨å†Œ4ä¸ªå‘˜å·¥é¡µé¢ï¼š

```json
{
  "pages": [
    "pages/index/index",
    "pages/order-detail/order-detail",
    "pages/order-list/order-list",
    "pages/payment/payment",
    "pages/profile/profile",
    "pages/recharge/recharge",
    "pages/recharge-logs/recharge-logs",
    "pages/staff/login/login",
    "pages/staff/scan/scan",
    "pages/staff/search/search",
    "pages/staff/orders/orders"
  ]
}
```

---

### 5. æ·»åŠ å¿…è¦ç»„ä»¶

åœ¨ `app.json` ä¸­æ·»åŠ å‘˜å·¥åŠŸèƒ½éœ€è¦çš„ç»„ä»¶ï¼š

```json
"usingComponents": {
  "van-field": "@vant/weapp/field/index",
  "van-search": "@vant/weapp/search/index",
  "van-icon": "@vant/weapp/icon/index",
  "van-radio": "@vant/weapp/radio/index",
  "van-radio-group": "@vant/weapp/radio-group/index"
}
```

---

### 6. æ·»åŠ ç›¸æœºæƒé™

åœ¨ `app.json` ä¸­æ·»åŠ ç›¸æœºæƒé™ï¼ˆæ‰«ç åŠŸèƒ½éœ€è¦ï¼‰ï¼š

```json
"permission": {
  "scope.camera": {
    "desc": "éœ€è¦ä½¿ç”¨ç›¸æœºæ‰«ææ ¸é”€ç "
  }
}
```

---

### 7. ä¸ªäººä¸­å¿ƒæ·»åŠ "å‘˜å·¥å…¥å£"

#### (1) ä¿®æ”¹ profile.wxml

åœ¨åŠŸèƒ½èœå•ä¸­æ·»åŠ "å‘˜å·¥å…¥å£"ï¼š

```xml
<van-cell
  title="å‘˜å·¥å…¥å£"
  is-link
  icon="manager-o"
  bind:click="goToStaffLogin"
/>
```

ä½ç½®ï¼šåœ¨"å……å€¼è®°å½•"å’Œ"è”ç³»å®¢æœ"ä¹‹é—´

#### (2) ä¿®æ”¹ profile.js

æ·»åŠ è·³è½¬æ–¹æ³•ï¼š

```javascript
// è·³è½¬åˆ°å‘˜å·¥ç™»å½•
goToStaffLogin() {
  wx.navigateTo({
    url: '/pages/staff/login/login'
  })
},
```

---

### 8. ä¿®å¤é¡µé¢è·³è½¬è·¯å¾„

#### (1) scan.jsï¼ˆæ‰«ç é¡µï¼‰

```javascript
// æ£€æŸ¥ç™»å½• - ä¿®å¤
checkLogin() {
  if (!app.checkLogin()) {
    wx.reLaunch({
      url: '/pages/staff/login/login'  // âœ… æ”¹ä¸ºæ–°è·¯å¾„
    });
  }
},

// é€€å‡ºç™»å½• - ä¿®å¤
handleLogout() {
  wx.showModal({
    title: 'ç¡®è®¤é€€å‡º',
    content: 'ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ',
    success: (res) => {
      if (res.confirm) {
        app.logout();
        wx.reLaunch({
          url: '/pages/index/index'  // âœ… é€€å‡ºåå›åˆ°ç”¨æˆ·ç«¯é¦–é¡µ
        });
      }
    }
  });
},

// æ–°å¢ï¼šè·³è½¬åˆ°èˆ¹å·æŸ¥è¯¢
goToSearch() {
  wx.navigateTo({
    url: '/pages/staff/search/search'
  });
},

// æ–°å¢ï¼šè·³è½¬åˆ°å¾…å¤„ç†è®¢å•
goToOrders() {
  wx.navigateTo({
    url: '/pages/staff/orders/orders'
  });
}
```

#### (2) login.jsï¼ˆç™»å½•é¡µï¼‰

```javascript
// æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
onLoad() {
  if (app.checkLogin()) {
    wx.reLaunch({
      url: '/pages/staff/scan/scan'  // âœ… æ”¹ä¸ºæ–°è·¯å¾„
    });
  }
},

// ç™»å½•æˆåŠŸåè·³è½¬
async handleLogin() {
  await app.login(username, password);
  setTimeout(() => {
    wx.reLaunch({
      url: '/pages/staff/scan/scan'  // âœ… æ”¹ä¸ºæ–°è·¯å¾„
    });
  }, 1500);
}
```

---

## ğŸ¯ åŠŸèƒ½æµç¨‹

### ç”¨æˆ·ä½¿ç”¨æµç¨‹

```
ç”¨æˆ·è¿›å…¥å°ç¨‹åº
  â†“
[ç”¨æˆ·åŠŸèƒ½] é¦–é¡µã€è®¢å•ã€ä¸ªäººä¸­å¿ƒ
  â†“
ç‚¹å‡»ä¸ªäººä¸­å¿ƒ â†’ ç‚¹å‡»"å‘˜å·¥å…¥å£"
  â†“
è¿›å…¥å‘˜å·¥ç™»å½•é¡µ
  â†“
è¾“å…¥è´¦å·å¯†ç ï¼ˆadmin / admin123ï¼‰
  â†“
ç™»å½•æˆåŠŸ â†’ è¿›å…¥æ‰«ç é¡µ
  â†“
[å‘˜å·¥åŠŸèƒ½] æ‰«ç æ ¸é”€ã€èˆ¹å·æŸ¥è¯¢ã€è®¢å•åˆ—è¡¨
  â†“
ç‚¹å‡»"é€€å‡º" â†’ è¿”å›ç”¨æˆ·ç«¯é¦–é¡µ
```

### å‘˜å·¥ä¸»è¦åŠŸèƒ½

1. **æ‰«ç æ ¸é”€**ï¼ˆä¸»åŠŸèƒ½ï¼‰
   - æ‰«æç”¨æˆ·æ ¸é”€ç 
   - å‘èˆ¹ï¼šè¾“å…¥èˆ¹å· â†’ å¼€å§‹è®¡æ—¶
   - æ”¶èˆ¹ï¼šæŸ¥çœ‹è´¦å• â†’ ç¡®è®¤ç»“ç®—

2. **èˆ¹å·æŸ¥è¯¢**ï¼ˆè¾…åŠ©åŠŸèƒ½ï¼‰
   - ç”¨æˆ·æ‰‹æœºæ²¡ç”µæ—¶ä½¿ç”¨
   - è¾“å…¥èˆ¹å·æŸ¥è¯¢è®¢å•

3. **å¾…å¤„ç†è®¢å•**ï¼ˆè¾…åŠ©åŠŸèƒ½ï¼‰
   - æŸ¥çœ‹æ‰€æœ‰éœ€è¦å¤„ç†çš„è®¢å•
   - å¯ä»¥ç›´æ¥æ“ä½œ

4. **é€€å‡ºç™»å½•**
   - ç‚¹å‡»å³ä¸Šè§’"é€€å‡º"
   - è¿”å›ç”¨æˆ·ç«¯é¦–é¡µ

---

## ğŸ“± ç•Œé¢é¢„è§ˆ

### ä¸ªäººä¸­å¿ƒ - å‘˜å·¥å…¥å£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸ªäººä¸­å¿ƒ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ ç”¨æˆ·ä¿¡æ¯                  â”‚
â”‚  ğŸ’° å‚¨å€¼å¡ä½™é¢                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¦ æˆ‘çš„è®¢å•          >       â”‚
â”‚  ğŸ’³ å……å€¼è®°å½•          >       â”‚
â”‚  ğŸ‘¨â€ğŸ’¼ å‘˜å·¥å…¥å£          >   â­ æ–°å¢  â”‚
â”‚  ğŸ“ è”ç³»å®¢æœ          >       â”‚
â”‚  â„¹ï¸ å…³äºæ™¯åŒº          >       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‘˜å·¥ç™»å½•é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘˜å·¥å·¥ä½œå°                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚     ğŸ” å‘˜å·¥ç™»å½•               â”‚
â”‚                              â”‚
â”‚  ğŸ‘¤ ç”¨æˆ·å                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ admin                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚
â”‚  ğŸ”’ å¯†ç                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      ç™»å½•              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰«ç é¡µï¼ˆå‘˜å·¥ä¸»é¡µï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰«ç æ ¸é”€            [é€€å‡º]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¨â€ğŸ’¼ ç³»ç»Ÿç®¡ç†å‘˜  [ç®¡ç†å‘˜]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚
â”‚        ğŸ“·                     â”‚
â”‚   ç‚¹å‡»æ‰«ææ ¸é”€ç               â”‚
â”‚   æ”¯æŒå‘èˆ¹å’Œæ”¶èˆ¹æ“ä½œ          â”‚
â”‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“– æ“ä½œæŒ‡å—                  â”‚
â”‚                              â”‚
â”‚  1ï¸âƒ£ å‘èˆ¹æµç¨‹                 â”‚
â”‚  æ‰«ææ ¸é”€ç  â†’ è¾“å…¥èˆ¹å· â†’ è®¡æ—¶ â”‚
â”‚                              â”‚
â”‚  2ï¸âƒ£ æ”¶èˆ¹æµç¨‹                 â”‚
â”‚  æ‰«ææ ¸é”€ç  â†’ æŸ¥çœ‹è´¦å• â†’ ç¡®è®¤ â”‚
â”‚                              â”‚
â”‚  ğŸ’¡ ç‰¹æ®Šæƒ…å†µ                  â”‚
â”‚  æ¸¸å®¢æ‰‹æœºæ²¡ç”µï¼Ÿä½¿ç”¨èˆ¹å·æŸ¥è¯¢   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ” èˆ¹å·æŸ¥è¯¢] [ğŸ“‹ å¾…å¤„ç†è®¢å•] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ ç›®å½•ç»“æ„

### æ•´åˆå‰

```
æ™¯åŒºæ¸¸èˆ¹é¡¹ç›®/
â”œâ”€â”€ client-user/          # ç”¨æˆ·ç«¯
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â”œâ”€â”€ order-list/
â”‚   â”‚   â””â”€â”€ profile/
â”‚   â””â”€â”€ utils/
â””â”€â”€ client-staff/         # å‘˜å·¥ç«¯
    â”œâ”€â”€ pages/
    â”‚   â”œâ”€â”€ login/
    â”‚   â”œâ”€â”€ scan/
    â”‚   â”œâ”€â”€ search/
    â”‚   â””â”€â”€ orders/
    â””â”€â”€ utils/
```

### æ•´åˆå

```
æ™¯åŒºæ¸¸èˆ¹é¡¹ç›®/
â”œâ”€â”€ client-user/          # æ•´åˆåçš„å°ç¨‹åº
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ index/        # ç”¨æˆ·åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ order-list/
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â””â”€â”€ staff/        # â­ å‘˜å·¥åŠŸèƒ½
â”‚   â”‚       â”œâ”€â”€ login/
â”‚   â”‚       â”œâ”€â”€ scan/
â”‚   â”‚       â”œâ”€â”€ search/
â”‚   â”‚       â”œâ”€â”€ orders/
â”‚   â”‚       â””â”€â”€ utils/    # â­ å‘˜å·¥ç«¯å·¥å…·æ–‡ä»¶
â”‚   â””â”€â”€ utils/            # ç”¨æˆ·ç«¯å·¥å…·æ–‡ä»¶
â””â”€â”€ client-staff/         # ä¿ç•™ä½œä¸ºå¤‡ä»½
```

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### 1. å·¥å…·æ–‡ä»¶éš”ç¦»

**é—®é¢˜**ï¼šç”¨æˆ·ç«¯å’Œå‘˜å·¥ç«¯éƒ½æœ‰ utils ç›®å½•ï¼Œæ–‡ä»¶åç›¸åŒ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å‘˜å·¥ç«¯å·¥å…·æ–‡ä»¶æ”¾åœ¨ `pages/staff/utils/`
- å‘˜å·¥é¡µé¢å¼•ç”¨ `../utils/xxx`
- ç”¨æˆ·é¡µé¢å¼•ç”¨ `../../utils/xxx`
- ä¸¤å¥—å·¥å…·æ–‡ä»¶ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°

---

### 2. é¡µé¢è·¯å¾„ä¿®æ­£

**éœ€è¦ä¿®æ­£çš„è·¯å¾„**ï¼š

| åŸè·¯å¾„ | æ–°è·¯å¾„ | æ¶‰åŠæ–‡ä»¶ |
|--------|--------|---------|
| `/pages/login/login` | `/pages/staff/login/login` | scan.js, login.js |
| `/pages/scan/scan` | `/pages/staff/scan/scan` | login.js |
| `../../utils/xxx` | `../utils/xxx` | æ‰€æœ‰å‘˜å·¥é¡µé¢ |

---

### 3. å…¨å±€åº”ç”¨å¯¹è±¡ï¼ˆapp.jsï¼‰

**å‘˜å·¥ç«¯ä½¿ç”¨çš„å…¨å±€æ–¹æ³•**ï¼š
- `app.checkLogin()` - æ£€æŸ¥å‘˜å·¥ç™»å½•çŠ¶æ€
- `app.getStaffInfo()` - è·å–å‘˜å·¥ä¿¡æ¯
- `app.login(username, password)` - å‘˜å·¥ç™»å½•
- `app.logout()` - å‘˜å·¥é€€å‡º

**æ³¨æ„**ï¼šè¿™äº›æ–¹æ³•åœ¨ `client-staff/app.js` ä¸­å®šä¹‰ï¼Œéœ€è¦ç¡®ä¿ `client-user/app.js` ä¸­ä¹Ÿæœ‰è¿™äº›æ–¹æ³•ã€‚

---

### 4. é€€å‡ºç™»å½•å¤„ç†

å‘˜å·¥é€€å‡ºç™»å½•åï¼Œè·³è½¬åˆ°ç”¨æˆ·ç«¯é¦–é¡µï¼š

```javascript
handleLogout() {
  app.logout();  // æ¸…é™¤å‘˜å·¥ç™»å½•ä¿¡æ¯
  wx.reLaunch({
    url: '/pages/index/index'  // è¿”å›ç”¨æˆ·ç«¯é¦–é¡µ
  });
}
```

è¿™æ ·ç”¨æˆ·å¯ä»¥ç»§ç»­ä½¿ç”¨ç”¨æˆ·åŠŸèƒ½ï¼Œæˆ–è€…é‡æ–°è¿›å…¥å‘˜å·¥å…¥å£ã€‚

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### æµ‹è¯•1ï¼šä¸ªäººä¸­å¿ƒå‘˜å·¥å…¥å£

1. âœ… è¿›å…¥ç”¨æˆ·ç«¯ä¸ªäººä¸­å¿ƒ
2. âœ… æŸ¥çœ‹èœå•åˆ—è¡¨ï¼Œç¡®è®¤æœ‰"å‘˜å·¥å…¥å£"
3. âœ… å›¾æ ‡æ˜¾ç¤ºä¸º manager-o
4. âœ… ç‚¹å‡»åè·³è½¬åˆ°å‘˜å·¥ç™»å½•é¡µ

---

### æµ‹è¯•2ï¼šå‘˜å·¥ç™»å½•

1. âœ… è¿›å…¥å‘˜å·¥ç™»å½•é¡µ
2. âœ… è¾“å…¥è´¦å·ï¼šadmin
3. âœ… è¾“å…¥å¯†ç ï¼šadmin123
4. âœ… ç‚¹å‡»ç™»å½•æŒ‰é’®
5. âœ… æ˜¾ç¤º"ç™»å½•æˆåŠŸ"æç¤º
6. âœ… 1.5ç§’åè·³è½¬åˆ°æ‰«ç é¡µ

---

### æµ‹è¯•3ï¼šæ‰«ç æ ¸é”€

1. âœ… è¿›å…¥æ‰«ç é¡µ
2. âœ… æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯ï¼ˆå§“åã€è§’è‰²ï¼‰
3. âœ… å³ä¸Šè§’æ˜¾ç¤º"é€€å‡º"æŒ‰é’®
4. âœ… ä¸­é—´æ˜¾ç¤ºæ‰«ç å›¾æ ‡
5. âœ… åº•éƒ¨æ˜¾ç¤ºä¸¤ä¸ªå¿«æ·æŒ‰é’®ï¼šèˆ¹å·æŸ¥è¯¢ã€å¾…å¤„ç†è®¢å•
6. âœ… ç‚¹å‡»æ‰«ç å›¾æ ‡ï¼Œè°ƒèµ·ç›¸æœº
7. âœ… æ‰«æç”¨æˆ·æ ¸é”€ç ï¼Œèƒ½æ­£å¸¸å‘èˆ¹/æ”¶èˆ¹

---

### æµ‹è¯•4ï¼šèˆ¹å·æŸ¥è¯¢

1. âœ… åœ¨æ‰«ç é¡µç‚¹å‡»"èˆ¹å·æŸ¥è¯¢"
2. âœ… è·³è½¬åˆ°æœç´¢é¡µé¢
3. âœ… è¾“å…¥èˆ¹å·èƒ½æ­£å¸¸æœç´¢

---

### æµ‹è¯•5ï¼šå¾…å¤„ç†è®¢å•

1. âœ… åœ¨æ‰«ç é¡µç‚¹å‡»"å¾…å¤„ç†è®¢å•"
2. âœ… è·³è½¬åˆ°è®¢å•åˆ—è¡¨é¡µ
3. âœ… æ˜¾ç¤ºæ‰€æœ‰å¾…å¤„ç†çš„è®¢å•

---

### æµ‹è¯•6ï¼šé€€å‡ºç™»å½•

1. âœ… åœ¨æ‰«ç é¡µç‚¹å‡»å³ä¸Šè§’"é€€å‡º"
2. âœ… å¼¹å‡ºç¡®è®¤å¼¹çª—
3. âœ… ç‚¹å‡»ç¡®è®¤
4. âœ… è·³è½¬åˆ°ç”¨æˆ·ç«¯é¦–é¡µ
5. âœ… å¯ä»¥ç»§ç»­ä½¿ç”¨ç”¨æˆ·åŠŸèƒ½
6. âœ… å†æ¬¡è¿›å…¥å‘˜å·¥å…¥å£éœ€è¦é‡æ–°ç™»å½•

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. app.js å…¨å±€æ–¹æ³•

**é‡è¦**ï¼šç¡®ä¿ `client-user/app.js` ä¸­åŒ…å«å‘˜å·¥ç™»å½•ç›¸å…³çš„å…¨å±€æ–¹æ³•ã€‚

å¦‚æœ `client-user/app.js` ä¸­æ²¡æœ‰è¿™äº›æ–¹æ³•ï¼Œéœ€è¦ä» `client-staff/app.js` ä¸­å¤åˆ¶ï¼š

```javascript
// å…¨å±€æ•°æ®
globalData: {
  staffInfo: null  // å‘˜å·¥ä¿¡æ¯
},

// æ£€æŸ¥å‘˜å·¥ç™»å½•çŠ¶æ€
checkLogin() {
  const staffInfo = wx.getStorageSync('staffInfo');
  if (staffInfo) {
    this.globalData.staffInfo = staffInfo;
    return true;
  }
  return false;
},

// è·å–å‘˜å·¥ä¿¡æ¯
getStaffInfo() {
  return this.globalData.staffInfo;
},

// å‘˜å·¥ç™»å½•
async login(username, password) {
  const res = await wx.cloud.callFunction({
    name: 'staffLogin',
    data: { username, password }
  });

  if (res.result.success) {
    const staffInfo = res.result.staff;
    this.globalData.staffInfo = staffInfo;
    wx.setStorageSync('staffInfo', staffInfo);
    return staffInfo;
  } else {
    throw new Error(res.result.message || 'ç™»å½•å¤±è´¥');
  }
},

// å‘˜å·¥é€€å‡ºç™»å½•
logout() {
  this.globalData.staffInfo = null;
  wx.removeStorageSync('staffInfo');
}
```

---

### 2. ç›¸æœºæƒé™

ç¡®ä¿åœ¨çœŸæœºä¸Šæµ‹è¯•æ—¶ï¼Œç”¨æˆ·å·²æˆæƒç›¸æœºæƒé™ï¼Œå¦åˆ™æ‰«ç åŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚

---

### 3. äº‘å‡½æ•°è°ƒç”¨

å‘˜å·¥åŠŸèƒ½ä½¿ç”¨çš„äº‘å‡½æ•°ï¼š
- staffLogin - å‘˜å·¥ç™»å½•
- scanCode - æ‰«ç æ ¸é”€
- startTrip - å‘èˆ¹
- endTrip - æ”¶èˆ¹
- getPendingOrders - è·å–å¾…å¤„ç†è®¢å•
- findByBoatNumber - æŒ‰èˆ¹å·æŸ¥è¯¢

ç¡®ä¿è¿™äº›äº‘å‡½æ•°å·²ç»éƒ¨ç½²ã€‚

---

## ğŸ“ ä¿®æ”¹æ–‡ä»¶æ¸…å•

| åºå· | æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|-----|------|---------|
| 1 | `client-user/app.json` | æ³¨å†Œå‘˜å·¥é¡µé¢ã€æ·»åŠ ç»„ä»¶ã€æ·»åŠ ç›¸æœºæƒé™ |
| 2 | `client-user/pages/profile/profile.wxml` | æ·»åŠ "å‘˜å·¥å…¥å£"èœå•é¡¹ |
| 3 | `client-user/pages/profile/profile.js` | æ·»åŠ  goToStaffLogin æ–¹æ³• |
| 4 | `client-user/pages/staff/scan/scan.js` | ä¿®å¤è·¯å¾„ã€æ·»åŠ è·³è½¬æ–¹æ³• |
| 5 | `client-user/pages/staff/login/login.js` | ä¿®å¤è·¯å¾„ |
| 6 | æ‰€æœ‰å‘˜å·¥é¡µé¢ | æ‰¹é‡ä¿®æ”¹å·¥å…·æ–‡ä»¶å¼•ç”¨è·¯å¾„ |

---

## ğŸ‰ æ•´åˆå®Œæˆ

- âœ… å‘˜å·¥ç«¯æ‰€æœ‰åŠŸèƒ½å·²æ•´åˆåˆ°ç”¨æˆ·ç«¯
- âœ… é€šè¿‡ä¸ªäººä¸­å¿ƒ"å‘˜å·¥å…¥å£"è®¿é—®
- âœ… å‘˜å·¥å’Œç”¨æˆ·åŠŸèƒ½å®Œå…¨éš”ç¦»
- âœ… åªéœ€æäº¤ä¸€ä¸ªå°ç¨‹åºå³å¯

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**æ•´åˆå®Œæˆæ—¶é—´**ï¼š2026-02-12
**çŠ¶æ€**ï¼šâœ… æ•´åˆå®Œæˆï¼Œç­‰å¾…æµ‹è¯•éªŒè¯
