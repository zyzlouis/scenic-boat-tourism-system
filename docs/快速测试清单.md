# 快速测试清单 ✅

## 🚨 开始前必读
**1. 点击【编译】按钮重新编译项目**
**2. 必须创建新订单测试，不要用旧订单！**

---

## 测试流程（5分钟）

### 第1步：创建新订单 (1分钟)
```
首页 → 选择船型 → 立即租赁 → 确认创建
```

**预期结果：**
- ✅ 跳转到订单详情页
- ✅ 页面顶部显示"待支付"状态（橙色）

---

### 第2步：模拟支付 (1分钟)
```
订单详情页 → 底部【去支付】 → 【确认支付】
```

**预期结果：**
- ✅ 支付成功提示
- ✅ 自动跳转回订单详情页
- ✅ 状态变为"待核销"（蓝色）

---

### 第3步：检查订单详情 (2分钟)

#### 二维码部分
- [ ] 看到二维码图片（黑白方块图案）
- [ ] 二维码下方显示6位核销码（如：A1B2C3）

#### 订单信息卡片
**必须显示以下内容：**
- [ ] 订单号：ORDER202501...
- [ ] 船型：双人游艇 / 四人画舫 等
- [ ] 基础票价：¥**XX.XX** （不是 ¥ 或 ¥0.00）
- [ ] 押金：¥**XX.XX**
- [ ] 订单总额：¥**XX.XX** （红色）
- [ ] 创建时间：2025-02-04 **HH:MM:SS**

**❌ 如果金额显示为"¥"或者完全不显示 → 有问题！**

---

### 第4步：检查订单列表 (1分钟)
```
返回首页 → 底部【订单】Tab
```

**预期结果：**
- [ ] 看到刚才创建的订单
- [ ] 订单金额正常显示：¥XX.XX
- [ ] 状态显示"待核销"（蓝色）
- [ ] 创建时间正常显示

---

## 🔍 问题排查

### 问题A：金额不显示或显示为"¥"

**检查1 - 控制台**
打开【控制台】Tab，找到这条日志：
```
📦 订单数据已设置: {orderId: "xxx", basePrice: XXX, ...}
```

**问1：** 能找到这条日志吗？
- 找不到 → 云函数调用失败，截图发我
- 找到了 → 继续问2

**问2：** 日志中的 `basePrice` 是数字还是 undefined？
- 是数字（如100） → 前端显示问题，继续问3
- 是 undefined → 数据库数据问题或云函数问题，截图发我

**问3：** 在 Elements 检查器中，找到金额显示的元素，看内容是什么？
- 内容为空 → WXS 函数没执行，截图发我
- 内容是 ¥0.00 → 数据传递问题，截图发我

---

### 问题B：二维码不显示

**检查1 - 核销码**
在【控制台】中查看日志，订单数据中有 `verificationCode` 字段吗？
- 没有 → 支付流程有问题，截图发我
- 有 → 继续检查2

**检查2 - 图片加载**
1. 右键点击二维码应该显示的位置
2. 选择【检查】
3. 查看是否有 `<image>` 标签
4. src 属性是否为：`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=XXXXXX`

**如果没有 image 标签或 src 为空 → 截图发我**

**检查3 - 网络连接**
在浏览器中访问：
```
https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=TEST123
```
能看到二维码图片吗？
- 不能 → 网络问题或 API 被墙
- 能 → 小程序端问题，截图发我

---

### 问题C：编译报错

**常见错误1：** `Cannot find module 'xxx'`
- 解决：右键【cloudfunctions】→【同步云函数列表】

**常见错误2：** `xxx is not defined`
- 检查是否正确导入了 WXS 模块

**其他错误：**
- 截图控制台错误信息发我

---

## 📸 需要截图的内容

如果测试失败，请提供以下截图：

1. **订单详情页** 完整截图
2. **控制台** - 包含 `📦 订单数据已设置` 的日志
3. **网络** Tab - getOrderDetail 的返回结果
4. **错误信息**（如果有红色报错）

---

## ✅ 测试通过标准

**全部以下条件满足才算通过：**

1. ✅ 二维码正常显示，能扫描
2. ✅ 所有金额都显示为 ¥XX.XX 格式（不是 ¥ 或空白）
3. ✅ 时间显示为 YYYY-MM-DD HH:MM:SS 格式
4. ✅ 订单状态颜色正确（待支付=橙色，待核销=蓝色）
5. ✅ 订单列表也能正常显示金额和时间

---

## 下一步

**测试通过后：**
准备船型图片（参考 `docs/船型图片要求.md`），我帮你上传到云存储。

**测试不通过：**
按照上面的【问题排查】步骤检查，并提供截图。

**预计完成时间：** 今晚 ⏰
